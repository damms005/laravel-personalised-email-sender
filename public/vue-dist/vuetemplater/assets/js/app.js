(function(t){function e(e){for(var r,i,s=e[0],l=e[1],u=e[2],c=0,p=[];c<s.length;c++)i=s[c],o[i]&&p.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);d&&d(e);while(p.length)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},o={app:0},a=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var d=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("64a9"),o=n.n(r);o.a},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col h-screen bg-blue-100 p-5 overflow-hidden",attrs:{id:"app"}},[n("div",{staticClass:"font-mono p-4 bg-white shadow rounded mb-5 font-bold text-3xl underline"},[t._v("VueTemplater")]),n("div",{staticClass:"font-mono"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.rawTsvData,expression:"rawTsvData"}],staticClass:"w-full bg-black rounded text-white p-4 font-mono text-sm",attrs:{onkeydown:"if(event.keyCode===9){var v=this.value,s=this.selectionStart,e=this.selectionEnd;this.value=v.substring(0, s)+'\\t'+v.substring(e);this.selectionStart=this.selectionEnd=s+1;return false;}",placeholder:"paste tab-separated values here. Headers will be used as placeholder in the input textbox below...",rows:"10"},domProps:{value:t.rawTsvData},on:{input:function(e){e.target.composing||(t.rawTsvData=e.target.value)}}})]),n("div",{staticClass:"flex-grow flex items-stretch p-5 shadow bg-white rounded"},[n("div",{staticClass:"flex-grow flex flex-col rounded font-mono"},[n("div",{staticClass:"w-full overflow-y-scroll rounded m-0"},[n("tinymce",{attrs:{id:"d1",toolbar1:t.toolbar1,toolbar2:t.toolbar2,plugins:t.plugins},model:{value:t.mailTemplate,callback:function(e){t.mailTemplate=e},expression:"mailTemplate"}})],1),n("div",{staticClass:"flex flex-row p-2 font-mono text-sm w-full"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.postEndpoint,expression:"postEndpoint"}],staticClass:"p-2 flex-grow self-stretch w-full rounded border mr-4",attrs:{type:"text",placeholder:"enter endpoint here"},domProps:{value:t.postEndpoint},on:{input:function(e){e.target.composing||(t.postEndpoint=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.uuid,expression:"uuid"}],staticClass:"p-2 flex-grow self-stretch w-full rounded border mr-4",attrs:{type:"text",placeholder:"enter header for uuid"},domProps:{value:t.uuid},on:{input:function(e){e.target.composing||(t.uuid=e.target.value)}}}),n("button",{staticClass:"font-serif self-stretch text-xl w-full border-2 bg-blue-100 hover:bg-blue-500 text-blue-900 hover:text-white p-3 rounded",on:{click:function(e){return t.sendCustomizedEmail()}}},[t._v(t._s(t.button_text))])])]),n("div",{staticClass:"flex-grow relative overflow-hidden bg-blue-100 text-xs shadow font-sans border rounded ml-5 font-mono"},[n("div",{staticClass:"bg-blue-900 text-white p-4"},[t._v("\n        Render row #:\n        "),n("input",{staticClass:"text-blue-900 border p-2 w-1/2",attrs:{type:"number",min:"1",placeholder:"enter the row to render"},on:{keyup:t.renderThisRow}})]),n("div",{staticClass:"absolute h-full w-full overflow-y-auto bg-blue-100 text-grey-300 text-xs font-sans rounded p-4 font-mono",domProps:{innerHTML:t._s(t.builtSampleOutput)}})])])])},a=[],i=(n("456d"),n("ac6a"),n("a481"),n("3b2b"),n("28a5"),n("7f7f"),n("2cbf")),s=(n("3022"),n("65ad")),l=n.n(s),u={name:"app",components:{tinymce:i["a"]},data:function(){return{postEndpoint:"",uuid:"email",randomRenderedRow:1,rawTsvData:"sn\tname\temail\tphone\taddress\n",mailTemplate:"<br><br>Hello,<b><i>{{name}}</i></b>.<br><br>Can we call you on <b><u>{{phone}}</u></b>?<br><br><br><br><br><br><br><br><br>",toolbar1:" bold italic forecolor backcolor | link | alignleft aligncenter alignright alignjustify | numlist bullist outdent indent | removeformat",toolbar2:"",plugins:["advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","template paste textcolor colorpicker textpattern imagetools toc help emoticons hr codesample"],builtSampleOutput:"",uuid_index:0,button_text:"Submit"}},mounted:function(){this.uuid_index=this.tsvHeaders.indexOf(this.uuid);for(var t=this.rawTsvData,e=1;e<=50;e++)t+="".concat(e,"\t").concat(l.a.Name.name(),"\t").concat(l.a.Internet.email(),"\t").concat(l.a.PhoneNumber.cellPhone(),"\t").concat(l.a.Address.streetAddress(),"\n");this.rawTsvData=t,this.builtSampleOutput=this.buildMessageFromTemplate(this.splittedTrimmedDataRows[1].split("\t"),this.mailTemplate,this.tsvHeaders)},computed:{splittedTrimmedDataRows:function(){return this.trimmedTsvData.split("\n")},trimmedTsvData:{get:function(){return this.rawTsvData.trim()},set:function(){}},tsvHeaders:function(){return this.splittedTrimmedDataRows&&this.splittedTrimmedDataRows.length>=1?this.splittedTrimmedDataRows[0].split("\t"):[]}},watch:{mailTemplate:function(){this.randomRenderedRow=c(1,this.splittedTrimmedDataRows.length-1);var t=this.buildMessageFromTemplate(this.splittedTrimmedDataRows[this.randomRenderedRow].split("\t"),this.mailTemplate,this.tsvHeaders);this.builtSampleOutput=t},randomRenderedRow:function(){this.mailTemplate=this.mailTemplate+" "}},methods:{renderThisRow:function(t){this.builtSampleOutput=this.buildMessageFromTemplate(this.splittedTrimmedDataRows[t.target.value].split("\t"),this.mailTemplate,this.tsvHeaders)},buildMessageFromTemplate:function(t,e,n){var r=e;try{for(var o=0;o<n.length;o++){var a=new RegExp("{{".concat(n[o],"}}"),"gi");r=r.replace(a,t[o])}}catch(i){}return r},getAllCustomizedEmails:function(){for(var t={},e=1;e<this.splittedTrimmedDataRows.length;e++){var n=this.splittedTrimmedDataRows[e].split("\t");t[n[this.uuid_index]]=this.buildMessageFromTemplate(n,this.mailTemplate,this.tsvHeaders)}return t},sendCustomizedEmail:function(t){var e=this,n=this.getAllCustomizedEmails(),r="--------------------";this.builtSampleOutput="",Object.keys(n).forEach(function(t,o){e.builtSampleOutput+="<br>".concat(t,"<br>").concat(r,"<br>").concat(n[t],"<br><br>")}),console.log("sending to",this.postEndpoint,n),this.button_text="Sending...",d(this.postEndpoint,n).then(function(t){return console.log(t)}).catch(function(t){return console.error(t)}).finally(function(){return e.button_text="Submit"})}}};function d(t,e){return fetch(t,{body:JSON.stringify(e),cache:"no-cache",credentials:"same-origin",headers:{"user-agent":"Mozilla/4.0 MDN Example","content-type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},method:"POST",mode:"cors",redirect:"follow",referrer:"no-referrer"}).then(function(t){return t})}function c(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}var p=u,m=(n("034f"),n("2877")),f=Object(m["a"])(p,o,a,!1,null,null,null),h=f.exports;n("def6");r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(h)}}).$mount("#app")},"64a9":function(t,e,n){},def6:function(t,e,n){}});
//# sourceMappingURL=app.js.map